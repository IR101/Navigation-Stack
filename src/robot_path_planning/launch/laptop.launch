<launch>
  <!-- Use simulated time
  <param name="use_sim_time" value="true"/>
-->

  <!-- PORT AUTOMATION -->
   <node pkg="robot_path_planning" type="port_automation.py" name="port_detection" output="screen"/>
 
  <!--SEND WEBSOCKET (Lidar data) TO ROS-->
  <node pkg="robot_path_planning" type="laptop_to_ros.py" name="laptop_to_ros" output="screen"/> 

  <!-- LOAD ROBOT DESCRIPTION -->
  <param name="robot_description" textfile="$(find ugv)/urdf/ugv.urdf" />

  <!-- PUBLISH JOINT STATE OF UGV -->
  <node name="joint_state_publisher" pkg="joint_state_publisher" type="joint_state_publisher" />

  <!-- PUBLISH UGV STATE -->
  <node name="robot_state_publisher" pkg="robot_state_publisher" type="robot_state_publisher" output="screen" >
    <param name="robot_description" textfile="$(find ugv)/urdf/ugv.urdf" />
  </node>

    <!-- START HECTOR SLAM-->
  <include file="$(find robot_path_planning)/launch/hector_slam.launch" /> 

  <!--Hector Trajectory Server for Localization-->
  <node name="hector_trajectory_server" pkg="hector_trajectory_server" type="hector_trajectory_server" output="screen">
    <param name="base_frame" value="base_link"/>
    <param name="odom_frame" value="odom"/>
    <param name="map_frame" value="map"/>
    <param name="scan_topic" value="scan"/> 
  </node>

  <node pkg="robot_path_planning" type="odom_to_base.py" name="odom_to_base" output="screen"/> 

  <node pkg="robot_path_planning" type="navfn_global.py" name="global_planner" output="screen"/>

  <node pkg="robot_path_planning" type="local_static.py" name="local_planner" output="screen" />

  <node pkg="robot_path_planning" type="local_a_star.py" name="local_a_star" output="screen" />

  <node pkg="robot_path_planning" type="dynamic_obstacle.py" name="dynamic_obstacle" output="screen" />

  <node pkg="robot_path_planning" type="rosbridge.py" name="rosbridge" output="screen" />

  <!-- <node pkg="robot_path_planning" type="stream_rviz.py" name="stream_rviz" output="screen" /> -->

  <!-- <node pkg="robot_path_planning" type="hardware_interface.py" name="hardware_interface" output="screen"/>  -->
  


 <!-- Spawn the diff_drive_controller-->
  <node name="diff_drive_controller" pkg="controller_manager" type="spawner" args="diff_drive_controller" output="screen" >
    <rosparam file="$(find robot_path_planning)/config/controllers.yaml" command="load" />
  </node>

  <!-- RViz for Path Planning -->
  <node name="rviz" pkg="rviz" type="rviz" args="-d $(find robot_path_planning)/rviz/custom_planner.rviz" output="screen"/>


</launch>


