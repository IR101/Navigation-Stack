<launch>
  <!-- Use simulated time -->
  <param name="use_sim_time" value="true"/>

  <!--FOR HECTOR SLAM UNCOMMENT BELOW AND COMMENT FOR AMCL USE-->
  
   <!-- Include localize -->
  <include file="$(find robot_path_planning)/launch/hector_slam.launch" /> 

 
 <!--FOR AMCL UNCOMMENT BELOW LINE AND COMMENT FOR HECTOR SLAM USE-->

  <!-- <node pkg="amcl" type="amcl" name="amcl" output="screen">
    <rosparam file="$(find robot_path_planning)/config/amcl_params.yaml" command="load"/>
    <remap from="odom" to="/hector_odom"/>
    <remap from="scan" to="/scan"/> 
  </node>-->

 <!-- Load the map -->
  <!-- <include file="$(find robot_path_planning)/launch/load_map.launch"/> -->

  <!-- Start AMCL for Localization -->
  <!--<node name="amcl" pkg="amcl" type="amcl" output="screen">
    <param name="use_map_topic" value="true"/>
    <rosparam file="$(find robot_path_planning)/config/amcl_params.yaml" command="load"/>
    <param name="odom_model_type" value="diff"/>
    <param name="odom_alpha1" value="0.0001"/>  
    <param name="odom_alpha2" value="0.0001"/>
    <param name="odom_alpha3" value="0.0001"/>
    <param name="odom_alpha4" value="0.0001"/>
  </node>-->


  <!-- Start Gazebo -->
  <include file="$(find robot_path_planning)/launch/lab.launch" /> 

  <!-- Load the robot description -->
  <param name="robot_description" textfile="$(find ugv)/urdf/ugv.urdf" />

  <!-- Spawn the robot in Gazebo -->
  <node name="spawn_ugv" pkg="gazebo_ros" type="spawn_model" args="-urdf -param robot_description -model ugv -x 2.0 -y 3.0 -z 0.1 -Y 1.57" />

  <!-- Start joint_state_publisher -->
  <node name="joint_state_publisher" pkg="joint_state_publisher" type="joint_state_publisher" />

  <!-- Start robot_state_publisher -->
  <node name="robot_state_publisher" pkg="robot_state_publisher" type="robot_state_publisher" output="screen" >
    <param name="robot_description" textfile="$(find ugv)/urdf/ugv.urdf" />
  </node>



  <!-- Start the global path planner -->
  <node pkg="robot_path_planning" type="navfn_global.py" name="navfn_global" output="screen"/>
  
  <node pkg="robot_path_planning" type="local_a_star.py" name="local_a_star" output="screen" />
  
  <node pkg="robot_path_planning" type="local_static.py" name="local_planner" output="screen" />

  <node pkg="robot_path_planning" type="dynamic_obstacle.py" name="dynamic_obstacle" output="screen"/> 


  <!-- Start joint controller -->
  <node name="diff_drive_controller" pkg="controller_manager" type="spawner" args="diff_drive_controller" output="screen" >
    <rosparam file="$(find robot_path_planning)/config/controllers.yaml" command="load" />
  </node>

  <!-- Start RViz -->
  <node name="rviz" pkg="rviz" type="rviz" args="-d $(find robot_path_planning)/rviz/static_hector_slam.rviz" output="screen"/>

</launch>
